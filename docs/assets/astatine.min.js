/*
version: 1.2.0
title: astatine
author: alexander elias
*/
!function(){"use strict";function t(t){var e="",n=null;for(n in t)e=e.length>0?e+"&":e,e=e+encodeURIComponent(n)+"="+encodeURIComponent(t[n]);return e}function e(t){for(var e=t.getElementsByTagName("*"),n={},r=0,i=e.length;r<i;r++){var a=e[r],s=a.name,o=a.type,c=a.value,p=a.checked,d=a.disabled,l=a.tagName.toLowerCase();if(("input"===l||"textarea"===l||"select"===l)&&s&&!d&&"submit"!==o&&"reset"!==o&&"button"!==o&&"file"!==o)if("checkbox"===o)n[s]=p;else if("radio"===o)p&&(n[s]=c);else if("select-one"===o||"select-multiple"===o){
n[s]=[];for(var u=0,m=a.selectedOptions.length;u<m;u++)n[s].push(a.selectedOptions[u].value);n[s]=n[s].join(", ")}else n[s]=c}return n}function n(t,e){var n="string"==typeof t?document.querySelector(t):t,r=document.createElement("div");r.classList.add("spinner"),n.appendChild(r),n.addEventListener("submit",function(t){t.preventDefault(),e(n,n.querySelector("[type=submit]"),r)})}function r(e){if(!e)throw new Error("Astatine.ajax: requires options");if(!e.action)throw new Error("Astatine.ajax: requires options.action");
if(!e.method)throw new Error("Astatine.ajax: requires options.method");if(!e.success)throw new Error("Astatine.ajax: requires options.success");if(!e.error)throw new Error("Astatine.ajax: requires options.error");if(e.headers||(e.headers={}),e.data)if("GET"===e.method)e.action=e.action+"?"+t(e.data),e.data=null;else{switch(e.requestType){case"script":e.contentType=o.script;break;case"json":e.contentType=o.json;break;case"xml":e.contentType=o.xml;break;case"html":e.contentType=o.html;break;case"text":
e.contentType=o.text;break;default:e.contentType=o.urlencoded}switch(e.responseType){case"script":e.accept=o.script;break;case"json":e.accept=o.json;break;case"xml":e.accept=o.xml;break;case"html":e.accept=o.html;break;case"text":e.accept=o.text}e.contentType===o.json&&(e.data=JSON.stringify(e.data)),e.contentType===o.urlencoded&&(e.data=t(e.data))}var n=new XMLHttpRequest;if(n.open(e.method.toUpperCase(),e.action,!0,e.username,e.password),e.mimeType&&n.overrideMimeType(e.mimeType),e.withCredentials&&(n.withCredentials=e.withCredentials),
e.accept&&(e.headers.Accept=e.accept),e.contentType&&(e.headers["Content-Type"]=e.contentType),e.headers)for(var r in e.headers)n.setRequestHeader(r,e.headers[r]);n.onreadystatechange=function(){if(4===n.readyState)return n.status>=200&&n.status<400?e.success(n):e.error(n)},n.send(e.data)}function i(t){if(!t)throw new Error("Astatine.submit: requires options");if(!t.query)throw new Error("Astatine.submit: requires options.query");if(!t.complete)throw new Error("Astatine.submit: requires options.complete");
null!==t.reset&&void 0!==t.reset||(t.reset=!0),n(t.query,function(n,i,a){if(a&&(a.style.display="block"),i&&(i.style.display="none"),t.data=t.data||e(n),t.action=t.action||n.getAttribute("action"),t.method=t.method||n.getAttribute("method"),t.success=function(e){a&&(a.style.display="none"),i&&(i.style.display="block"),t.reset&&n.reset(),t.complete(null,e,t.data)},t.error=function(e){a&&(a.style.display="none"),i&&(i.style.display="block"),t.complete(e,null,t.data)},t.prepare){var s=function(e){t.data=e,
r(t)},o=function(e){a&&(a.style.display="none"),i&&(i.style.display="block"),t.error(e)};t.prepare=t.prepare.bind(t,t.data,s,o);var c=t.prepare();c&&(t.data=c,r(t))}})}function a(t){return"\n\t.spinner {\n\t\tmargin: auto;\n\t\tdisplay: none;\n\t\twidth: "+t.thickness+";\n\t\theight: "+t.thickness+";\n\t\tborder: solid "+t.size+" "+t.colorBottom+";\n\t\tborder-top: solid "+t.size+" "+t.colorTop+";\n\t\tborder-radius: 50%;\n\t\tanimation: spin 2s linear infinite;\n\t\t-o-animation: spin 2s linear infinite;\n\t\t-ms-animation: spin 2s linear infinite;\n\t\t-moz-animation: spin 2s linear infinite;\n\t\t-webkit-animation: spin 2s linear infinite;\n\t}\n\t@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\n\t@-o-keyframes spin { 0% { -o-transform: rotate(0deg); } 100% { -o-transform: rotate(360deg); } }\n\t@-ms-keyframes spin { 0% { -ms-transform: rotate(0deg); } 100% { -ms-transform: rotate(360deg); } }\n\t@-moz-keyframes spin { 0% { -moz-transform: rotate(0deg); } 100% { -moz-transform: rotate(360deg); } }\n\t@-webkit-keyframes spin { 0% { -webkit-transform: rotate(0deg); }100% { -webkit-transform: rotate(360deg); } }\n\t";
}function s(t){var e=document.head,n=e.querySelector("[title=Astatine]"),r=a(t),i=document.createElement("style"),s=document.createTextNode(r);i.setAttribute("title","Astatine"),i.appendChild(s),n?e.replaceChild(i,n):document.head.appendChild(i)}var o={script:"text/javascript, application/javascript, application/x-javascript",json:"application/json, text/javascript",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",urlencoded:"application/x-www-form-urlencoded"},c={setup:{spinner:{
s:"3px",t:"15px",ct:"darkgray",cb:"lightgray"}},ajax:r,submit:i,formData:e,serialize:t};Object.defineProperties(c.setup.spinner,{size:{get:function(){return this.s},set:function(t){this.s=t,s(this)}},thickness:{get:function(){return this.t},set:function(t){this.t=t,s(this)}},colorTop:{get:function(){return this.ct},set:function(t){this.ct=t,s(this)}},colorBottom:{get:function(){return this.cb},set:function(t){this.cb=t,s(this)}}}),window.At=c,window.Astatine=c,document.addEventListener("DOMContentLoaded",function(){
s(window.Astatine.setup.spinner)})}();
